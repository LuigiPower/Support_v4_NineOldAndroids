<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2013-07-08
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20130708" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Android Support Library v4 with NineOldAndroids - </title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="http://github.com/kedzie/DraggableDrawers">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>support-v4-animator</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2013-07-08</li>
                      
                
                    
                 <li id="projectVersion" class="pull-right">Version: r13</li>
      
                                            <li class="divider pull-right">|</li>
                        
    <li class="pull-right">              <a href="../Support_v4_NineOldAndroids" title="Github Project Site">
        Github Project Site</a>
  </li>

                        </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Overview</li>
                                
      <li class="active">
    
            <a href="#"><i class="none"></i>Introduction</a>
          </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                                  
      <li>
    
                          <a href="project-info.html" title="Project Information">
          <i class="icon-chevron-down"></i>
        Project Information</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="license.html" title="Project License">
          <i class="none"></i>
        Project License</a>
            </li>
                      
      <li>
    
                          <a href="source-repository.html" title="Source Repository">
          <i class="none"></i>
        Source Repository</a>
            </li>
                      
      <li>
    
                          <a href="integration.html" title="Continuous Integration">
          <i class="none"></i>
        Continuous Integration</a>
            </li>
                      
      <li>
    
                          <a href="plugin-management.html" title="Plugin Management">
          <i class="none"></i>
        Plugin Management</a>
            </li>
                      
      <li>
    
                          <a href="issue-tracking.html" title="Issue Tracking">
          <i class="none"></i>
        Issue Tracking</a>
            </li>
                      
      <li>
    
                          <a href="team-list.html" title="Project Team">
          <i class="none"></i>
        Project Team</a>
            </li>
                      
      <li>
    
                          <a href="mail-lists.html" title="Mailing Lists">
          <i class="none"></i>
        Mailing Lists</a>
            </li>
                      
      <li class="active">
    
            <a href="#"><i class="none"></i>About</a>
          </li>
                      
      <li>
    
                          <a href="plugins.html" title="Project Plugins">
          <i class="none"></i>
        Project Plugins</a>
            </li>
                      
      <li>
    
                          <a href="project-summary.html" title="Project Summary">
          <i class="none"></i>
        Project Summary</a>
            </li>
                      
      <li>
    
                          <a href="dependency-management.html" title="Dependency Management">
          <i class="none"></i>
        Dependency Management</a>
            </li>
                      
      <li>
    
                          <a href="dependencies.html" title="Dependencies">
          <i class="none"></i>
        Dependencies</a>
            </li>
              </ul>
        </li>
                                                                                                                          
      <li>
    
                          <a href="project-reports.html" title="Project Reports">
          <i class="icon-chevron-right"></i>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                   
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>

    
    <div class="g-plusone" data-href="http://www.github.com/kedzie/support_v4_nineoldandroids" data-size="tall" ></div>

                   <div class="clear"></div>
                   
        
        
        
    <iframe src="http://www.facebook.com/plugins/like.php?href=http://www.github.com/kedzie/support_v4_nineoldandroids&send=false&layout=box_count&show-faces=false&action=like&colorscheme=light"
        scrolling="no" frameborder="0"
        style="border:none; width:48px; height:63px; margin-top: 10px;" ></iframe>
               <div class="clear"></div>
               
        
        
        <div id="twitter">
    
    <a href="https://twitter.com/mkedzierski" class="twitter-follow-button" data-show-count="false" data-align="left" data-size="medium" data-show-screen-name="true" data-lang="en">Follow mkedzierski</a>
    <script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

        </div>
                   <div class="clear"></div>
                                                                                                                   <a href="http://maven.apache.org/" title="Maven" class="builtBy">
        <img class="builtBy"  alt="Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
                      </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>Android Support Library v4 with NineOldAndroids</h1>
<p>Allows using android <a class="externalLink" href="http://developer.android.com/guide/topics/graphics/prop-animation.html" title="Android Property Animations">Property Animations</a> with Google&#x2019;s Support Library v4 Fragment transitions. Rely&#x2019;s on Jake Wharton&#x2019;s <a class="externalLink" href="http://nineoldandroids.com" title="NineOldAndroids">NineOldAndroids</a>.</p>

<ul>
  
<li>Object Animator API&#x2019;s for <a href="#transition">Fragment Transitions</a></li>
  
<li><a href="#standard">Standard Transitions</a></li>
  
<li><a href="#custom">Custom Transitions</a></li>
  
<li><a href="#fragment">Fragment Implementation</a></li>
  
<li><a href="#style">Style Resources</a></li>
  
<li><a href="#pager">ViewPager PagerTransformers</a></li>
  
<li><a href="#drawer">ActionBarToggle for Drawer Navigation</a></li>
</ul>
<div class="section">
<h2>Project Configuration<a name="Project_Configuration"></a></h2>
<p>Your project must have <a class="externalLink" href="http://nineoldandroids.com" title="NineOldAndroids">NineOldAndroids</a> in the classpath. This can be done with Maven or putting the jar into the /libs folder. <i>This project is packaged as an APK Library</i> to support style resources. Import it into eclipse and reference it as an Android Library. Right-click on project and <tt>Properties-&gt;Android</tt>. Finally remove Google&#x2019;s support v4 library from your classpath.</p></div>
<div class="section">
<h2>Usage<a name="Usage"></a></h2>
<p>Read Google&#x2019;s documentation about <a class="externalLink" href="http://developer.android.com/guide/topics/graphics/prop-animation.html" title="Android Property Animations">Property Animations</a>. They are different from View animations. For example:</p>
<p>Create a file `res/animator/fade_in.xml&#x2019;</p>

<div class="source">
<pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;set xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
	android:zAdjustment=&quot;top&quot;&gt;
    &lt;objectAnimator
        android:valueFrom=&quot;0&quot;
        android:valueTo=&quot;1&quot;
        android:valueType=&quot;floatType&quot;
        android:propertyName=&quot;alpha&quot;
        android:duration=&quot;220&quot;/&gt;
&lt;/set&gt;
</pre></div>
<p>Look at the sample application for a complete example and read below for instructions.</p>
<div class="section">
<h3><a name="transition"></a>Animator Fragment Transitions<a name="Animator_Fragment_Transitions"></a></h3>
<p>This fork allows using <a class="externalLink" href="http://nineoldandroids.com" title="NineOldAndroids">NineOldAndroids</a> Object Animators for fragment transitions. View animations will no longer work.</p>
<div class="section">
<h4><a name="standard"></a>Standard Transitions<a name="Standard_Transitions"></a></h4>
<p>Specify standard transitions in the transaction.</p>

<div class="source">
<pre>tx.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
</pre></div></div>
<div class="section">
<h4><a name="custom"></a>Custom Transitions<a name="Custom_Transitions"></a></h4>
<p>Specify custom transition animations in the transaction</p>

<div class="source">
<pre>tx.setCustomTransitions(R.animator.flip_left_in, R.animator.flip_left_out, R.animator.flip_right_in, R.animator.flip_right_out)
</pre></div></div>
<div class="section">
<h4><a name="fragment"></a>Fragment Implementation Specified Transitions<a name="Fragment_Implementation_Specified_Transitions"></a></h4>
<p>Specify animations in Fragment implementation</p>

<div class="source">
<pre>public class AnimatedFragment extends Fragment {

	//class contents removed

	@Override
	public Animator onCreateAnimator(int transit, boolean enter, int nextAnim) {
	   //If transaction specifies a custom animation, use it
	   if(nextAnim&gt;0)
		  return AnimatorInflater.loadAnimator(getActivity(), nextAnim);
	   if(enter)
		  return AnimatorInflater.loadAnimator(getActivity(), R.animator.fade_in);
	   else
		  return AnimatorInflater.loadAnimator(getActivity(), R.animator.fade_out);
	}

}
</pre></div></div>
<div class="section">
<h4><a name="style"></a>Transition style resources<a name="Transition_style_resources"></a></h4>
<p>Specify transition animations in a style resource.</p>
<p>Create a style resource `res/values/styles.xml&#x2019;</p>

<div class="source">
<pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;resources&gt;
 	&lt;!-- Override standard Transitions with a Style --&gt;
   	&lt;style name=&quot;MyTransitionStyle&quot;&gt;
	    &lt;item name=&quot;fragmentFadeEnterAnimation&quot;&gt;@animator/fade_enter&lt;/item&gt;
	    &lt;item name=&quot;fragmentFadeExitAnimation&quot;&gt;@animator/fade_exit&lt;/item&gt;
	    &lt;item name=&quot;fragmentOpenEnterAnimation&quot;&gt;@animator/flip_left_in&lt;/item&gt;
	    &lt;item name=&quot;fragmentOpenExitAnimation&quot;&gt;@animator/flip_left_out&lt;/item&gt;
	    &lt;item name=&quot;fragmentCloseEnterAnimation&quot;&gt;@animator/flip_right_in&lt;/item&gt;
	    &lt;item name=&quot;fragmentCloseExitAnimation&quot;&gt;@animator/flip_right_out&lt;/item&gt;
   	&lt;/style&gt;
&lt;/resources&gt;
</pre></div>
<p>Specify the resource and transition in the transaction</p>

<div class="source">
<pre>tx.setTransitionStyle(R.style.MyTransitionStyle);
tx.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
</pre></div></div></div>
<div class="section">
<h3><a name="pager"></a>PageTransformer<a name="PageTransformer"></a></h3>
<p>The standard ViewPager ignores <a class="externalLink" href="http://developer.android.com/training/animation/screen-slide.html#pagetransformer" title="Using ViewPager for Screen Slides">PageTransformers</a> in pre-HoneyComb API levels. This library supports implementing PageTransformers with <a class="externalLink" href="http://nineoldandroids.com" title="NineOldAndroids">NineOldAndroids</a>. Just <i>use ViewHelper instead of the View properties</i>. For example:</p>

<div class="source">
<pre>/**
 * Implemented using NineOldAndroids ViewHelper instead of newer API View properties
 */
public class ZoomOutPageTransformer implements PageTransformer {
    private static float MIN_SCALE = 0.85f;
    private static float MIN_ALPHA = 0.5f;

    public void transformPage(View view, float position) {
        int pageWidth = view.getWidth();
        int pageHeight = view.getHeight();
        
        if (position &lt; -1) { // [-Infinity,-1)
            // This page is way off-screen to the left.
            ViewHelper.setAlpha(view, 0);
        } else if (position &lt;= 1) { // [-1,1]
            // Modify the default slide transition to shrink the page as well
            float scaleFactor = Math.max(MIN_SCALE, 1 - Math.abs(position));
            float vertMargin = pageHeight * (1 - scaleFactor) / 2;
            float horzMargin = pageWidth * (1 - scaleFactor) / 2;
            if (position &lt; 0) {
                ViewHelper.setTranslationX(view, horzMargin - vertMargin / 2);
            } else {
                ViewHelper.setTranslationX(view, -horzMargin + vertMargin / 2);
            }

            // Scale the page down (between MIN_SCALE and 1)
            ViewHelper.setScaleX(view, scaleFactor);
            ViewHelper.setScaleY(view, scaleFactor);

            // Fade the page relative to its size.
            ViewHelper.setAlpha(view, MIN_ALPHA +
                    (scaleFactor - MIN_SCALE) /
                    (1 - MIN_SCALE) * (1 - MIN_ALPHA));

        } else { // (1,+Infinity]
            // This page is way off-screen to the right.
            ViewHelper.setAlpha(view, 0);
        }
    }
}
</pre></div>
<p>Set the PageTransformer as usual:</p>

<div class="source">
<pre>viewPager.setPageTransformer(new ZoomOutPageTransformer());
</pre></div></div>
<div class="section">
<h3><a name="drawer"></a>ActionBarDrawerToggle for Drawer Navigation<a name="ActionBarDrawerToggle_for_Drawer_Navigation"></a></h3>
<p>Google Support Library r13 added the Navigation Drawer. See the android docs for <a class="externalLink" href="http://developer.android.com/training/implementing-navigation/nav-drawer.html" title="Navigation Drawer">Drawer Navigation</a> for details. The ActionBarDrawerToggle may be used with ActionBarSherlock to change the <i>up</i> icon on the ActionBar on Gingerbread.</p></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                    2013
                        <a href="http://kedzie.github.com">Marek Kedzierski</a>.
            All Rights Reserved.      
                    
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
